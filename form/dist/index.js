!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("form",[],t):"object"==typeof exports?exports.form=t():e.form=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e){var t=e.main,n=e.elm,r=e.emit,u=e.msg,a=e.injection,p=e.update,v=a.validators;t(function(e){return[y]});var y=function(e){var t=e.on;t("keyup",c,s(m,250)),t("blur",c,b),t("change",f,b),t("submit",h)},m=function(e){var t=e.target.name,r=l(n),a=r.data;(0,i.default)(o({},t,a[t]),v).then(function(e){return u.set(function(e){return delete e.errors[t]})}).catch(function(e){return e}).finally(x)},b=function(e){var t=e.target.name,r=l(n),o=r.data;(0,i.default)(o,v).then(function(e){return u.set(function(e){return e.errors={}})}).catch(function(e){e=d(e),u.set(function(n){return n.errors[t]=e[t]})}).finally(x)},h=function(e){var t=l(n),o=t.data;(0,i.default)(o,v).then(function(t){r(":submit",{event:e,data:o}),u.set(function(e){return e.errors={}})}).catch(function(t){u.set(function(e){return e.errors=d(t)}),e.preventDefault()}).finally(x),e.preventDefault()},x=function(){var e=l(n),t=e.data,o=u.getState().valid;return(0,i.default)(t,v).then(function(e){o||(u.set(function(e){return e.valid=!0}),r(":valid"))}).catch(function(e){o&&(u.set(function(e){return e.valid=!1}),r(":invalid"))})};p(function(e){var t=Object.assign({},e);delete t.data,delete t.errors,delete t.valid,u.set(function(e){return e.data=t})})}Object.defineProperty(t,"__esModule",{value:!0}),t.model=void 0,t.default=u;var a=n(1),i=r(a),c='input[data-rules]:not([type="checkbox"]):not([type="radio"])',f='input[data-rules][type="checkbox"],input[data-rules][type="radio"],select[data-rules]',l=(t.model={errors:{},valid:!1,data:{}},function(e){var t=Array.from(e.elements).reduce(function(e,t){if(t.name){var n=new Function("return "+t.dataset.rules)(),r=n?n:null,o=t.type&&"checkbox"==t.type,u=o?t.checked?t.value:"":t.form[t.name].value;e[t.name]={value:u,rules:r}}return e},{});return{data:t}}),d=function(e){return Object.keys(e).reduce(function(t,n){return t[n]=Object.keys(e[n])[0],t},{})},s=function(e,t){var n=void 0;return function(){var r=this,o=arguments;clearTimeout(n),n=setTimeout(function(){return e.apply(r,o)},t)}}},function(e,t,n){var r,o,u;(function(e){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(a,i){"object"==n(t)&&"object"==n(e)?e.exports=i():(o=[],r=i,u="function"==typeof r?r.apply(t,o):r,!(void 0!==u&&(e.exports=u)))}(void 0,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return new Promise(function(n,r){var o={};return Object.keys(e).forEach(function(n){var r=e[n];Object.keys(r.rules||{}).forEach(function(u){if(!t[u])return console.warn("[Validation] There is no rule => "+u);var a=t[u]({value:r.value,data:r.rules[u],fields:e});a||(o[n]=o[n]||{},o[n][u]={data:r})})}),Object.keys(o).length?r(o):n(e)})}}])})}).call(t,n(2)(e))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}}])});