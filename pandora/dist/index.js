!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define("pandora",[],n):"object"==typeof exports?exports.pandora=n():e.pandora=n()}(this,function(){return function(e){function n(o){if(t[o])return t[o].exports;var r=t[o]={exports:{},id:o,loaded:!1};return e[o].call(r.exports,r,r.exports,n),r.loaded=!0,r.exports}var t={};return n.m=e,n.c=t,n.p="",n(0)}([function(e,n,t){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=t(1);Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return r[e]}})});var i=t(3);Object.defineProperty(n,"pandora",{enumerable:!0,get:function(){return o(i).default}})},function(e,n,t){(function(e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.log=function(n){return function(t){return e&&"production"!==e.env.NODE_ENV&&(console.groupCollapsed(n+" / INITIAL STATE"),console.log("+ state",t.getState()),console.groupEnd(),t.subscribe(function(e,t){var o=t.action,r=t.payload,i=JSON.parse(JSON.stringify(e));console.groupCollapsed(n+" / ACTION => "+o),console.log("+ payload",r),console.log("+ state",i),console.groupEnd()})),t}}}).call(n,t(2))},function(e,n){function t(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function r(e){if(f===setTimeout)return setTimeout(e,0);if((f===t||!f)&&setTimeout)return f=setTimeout,setTimeout(e,0);try{return f(e,0)}catch(n){try{return f.call(null,e,0)}catch(n){return f.call(this,e,0)}}}function i(e){if(l===clearTimeout)return clearTimeout(e);if((l===o||!l)&&clearTimeout)return l=clearTimeout,clearTimeout(e);try{return l(e)}catch(n){try{return l.call(null,e)}catch(n){return l.call(this,e)}}}function u(){g&&p&&(g=!1,p.length?h=p.concat(h):m=-1,h.length&&c())}function c(){if(!g){var e=r(u);g=!0;for(var n=h.length;n;){for(p=h,h=[];++m<n;)p&&p[m].run();m=-1,n=h.length}p=null,g=!1,i(e)}}function a(e,n){this.fun=e,this.array=n}function s(){}var f,l,d=e.exports={};!function(){try{f="function"==typeof setTimeout?setTimeout:t}catch(e){f=t}try{l="function"==typeof clearTimeout?clearTimeout:o}catch(e){l=o}}();var p,h=[],g=!1,m=-1;d.nextTick=function(e){var n=new Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)n[t-1]=arguments[t];h.push(new a(e,n)),1!==h.length||g||r(c)},a.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=s,d.addListener=s,d.once=s,d.off=s,d.removeListener=s,d.removeAllListeners=s,d.emit=s,d.prependListener=s,d.prependOnceListener=s,d.listeners=function(e){return[]},d.binding=function(e){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(e){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},function(e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var n=e.model,t=void 0===n?{}:n,o=e.actions,r=void 0===o?{}:o,i=e.middlewares,u=void 0===i?[]:i,c=e.autostart,a=void 0===c||c,s=e.callback,f=[],l=[],d=JSON.parse(JSON.stringify(t)),p="undefined"!=typeof window&&window.document&&window.document.createElement?requestAnimationFrame||setTimeout:function(e){return e()},h=function(e){r=e},g=function(e){e(d),l.forEach(function(e){return e(d,{haschanged:!0})})},m=function(){return Object.assign({},d)},y=function(){return r},v=function(e){e&&(e.call?l.push(e):l.push(function(n,t){t.action in e&&e[t.action](n,t)}))},b=function(e,n){return new Promise(function(t){f.push({action:e,payload:n}),1==f.length&&p(function(){for(;f.length;)T(f[0].action,f[0].payload,t)})})},T=function(e,n,t){var o=!1;if(e in r){var i=Object.assign({},d),u=r[e](i,n,w);u&&(d=Object.assign(d,u),o=!0)}if(f.shift(),!f.length){var c={action:e,payload:n,haschanged:o};l.forEach(function(e){return e(d,c)}),t(d,c)}},w={set:g,getState:m,dispatch:b,subscribe:v,getActions:y,setActions:h};return s&&(v(function(e,n){return n.haschanged?s(e,n):null}),a?s(d):null),u.forEach(function(e){return e(w)}),w}}])});