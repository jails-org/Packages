!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("spa",[],e):"object"==typeof exports?exports.spa=e():t.spa=e()}(this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return t[r].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.htmlLoader=e.Router=void 0;var o=n(1),i=r(o),a=n(2),s=r(a);e.default=function(t){function e(t,e,n){var r=t.params.page;(0,i.default)(o(r)).then(function(t){return t.page=r,t.outlet=h,t}).then(p)}function n(t){h.innerHTML="",h.appendChild(t.data.html),a&&a(t)}var r=t.update,o=t.load,a=t.callback,u=t.routes,c=u||function(){},p=r||n,l=new s.default,h=document.querySelector("[data-outlet]");l.get("/:page",e),l.get("/:page/*",e),c(l)};e.Router=s.default,e.htmlLoader=i.default},function(t,e,n){!function(e,n){t.exports=n()}(this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return t[r].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var n={};return e.m=t,e.c=n,e.p="./dist/",e(0)}([function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),r={};e.default=function(t){var e=t.key,u=t.templateUrl,c=t.css,p=t.js,l=e||u;if(l in r)return new Promise(function(t,e){var n=r[l],o=n.js,i=n.css,a=n.html;t({state:"changed",data:{js:o,css:i,html:a}})});var h=[];return h.push(o({url:u})),c&&h.push(s({url:c})),p&&h.push(a({url:p})),Promise.all(h).then(function(t){var e=n(t,3),o=e[0],a=e[1],s=e[2],u={js:s,css:a,html:i(o)};return r[l]=u,{state:"loaded",data:u}})};var o=function(t){var e=t.method,n=t.url;return new Promise(function(t,r){var o=new XMLHttpRequest;o.onreadystatechange=function(){4==o.readyState&&(200==o.status?t(o.responseText):r(o))},o.open(e||"get",n),o.send(null)})},i=function(t){var e=document.createElement("div");return e.innerHTML=t,e},a=function(t){var e=t.url;return new Promise(function(t,n){var r=document.createElement("script");r.onload=function(){return t(r)},r.src=e,document.head.appendChild(r)})},s=function(t){var e=t.url;return new Promise(function(t,n){var r=document.createElement("link");r.rel="stylesheet",r.href=e,document.head.appendChild(r),t(r)})}}])})},function(t,e,n){(function(n){!function(r){function o(t){"use strict";var e=this;return this.events={},this.state=null,this.options=t||{},this.options.env=this.options.env||(0===Object.keys(r).length&&n&&n.browser!==!0?"server":"client"),this.options.mode=this.options.mode||("server"!==this.options.env&&this.options.pushState&&r.history&&r.history.pushState?"pushState":"hashchange"),this.version="0.6.4","function"==typeof r.addEventListener&&(r.addEventListener("hashchange",function(){e.trigger("hashchange")}),r.addEventListener("popstate",function(t){return(!e.state||null!==e.state.previousState)&&void e.trigger("navigate")})),this}function i(t,e){this.stack=i.global.slice(0),this.router=t,this.runCallback=!0,this.callbackRan=!1,this.propagateEvent=!0,this.value=t.path();for(var n in e)this[n]=e[n];return this}function a(t){this.route=t,this.keys=[],this.regex=o.regexRoute(t,this.keys)}o.regexRoute=function(t,e,n,r){return t instanceof RegExp?t:(t instanceof Array&&(t="("+t.join("|")+")"),t=t.concat(r?"":"/?").replace(/\/\(/g,"(?:/").replace(/\+/g,"__plus__").replace(/(\/)?(\.)?:(\w+)(?:(\(.*?\)))?(\?)?/g,function(t,n,r,o,i,a){return e.push({name:o,optional:!!a}),n=n||"",""+(a?"":n)+"(?:"+(a?n:"")+(r||"")+(i||r&&"([^/.]+?)"||"([^/]+?)")+")"+(a||"")}).replace(/([\/.])/g,"\\$1").replace(/__plus__/g,"(.+)").replace(/\*/g,"(.*)"),new RegExp("^"+t+"$",n?"":"i"))},o._forEach=function(t,e){return"function"==typeof Array.prototype.forEach?Array.prototype.forEach.call(t,e):function(t,e){for(var n=0,r=this.length;n<r;++n)t.call(e,this[n],n,this)}.call(t,e)},o.prototype.get=o.prototype.add=function(t){var e=this,n=Array.prototype.slice.call(arguments,1,-1),r=Array.prototype.slice.call(arguments,-1)[0],o=new a(t),s=function(){var a=o.parse(e.path());if(a.match){var s={route:t,params:a.params,req:a,regex:a.match},u=new i(e,s).enqueue(n.concat(r));if(e.trigger("match",u,a),!u.runCallback)return e;if(u.previousState=e.state,e.state=u,u.parent()&&u.parent().propagateEvent===!1)return u.propagateEvent=!1,e;u.callback()}return e},u="pushState"!==e.options.mode&&"server"!==e.options.env?"hashchange":"navigate";return s().on(u,s)},o.prototype.trigger=function(t){var e=this,n=Array.prototype.slice.call(arguments,1);return this.events[t]&&o._forEach(this.events[t],function(t){t.apply(e,n)}),this},o.prototype.on=o.prototype.bind=function(t,e){var n=this,r=t.split(" ");return o._forEach(r,function(t){n.events[t]?n.events[t].push(e):n.events[t]=[e]}),this},o.prototype.once=function(t,e){var n=!1;return this.on(t,function(){return!n&&(n=!0,e.apply(this,arguments),e=null,!0)})},o.prototype.context=function(t){var e=this,n=Array.prototype.slice.call(arguments,1);return function(){var r=arguments[0],o=arguments.length>2?Array.prototype.slice.call(arguments,1,-1):[],i=Array.prototype.slice.call(arguments,-1)[0],a="/"!==t.slice(-1)&&"/"!==r&&""!==r?t+"/":t,s="/"!==r.substr(0,1)?r:r.substr(1),u=a+s;return e.add.apply(e,[u].concat(n).concat(o).concat([i]))}},o.prototype.navigate=function(t){return this.path(t).trigger("navigate")},o.prototype.path=function(t){var e,n=this;return"string"==typeof t?("pushState"===n.options.mode?(e=n.options.root?n.options.root+t:t,r.history.pushState({},null,e)):r.location?r.location.hash=(n.options.hashBang?"!":"")+t:r._pathname=t||"",this):"undefined"==typeof t?e="pushState"===n.options.mode?r.location.pathname.replace(n.options.root,""):"pushState"!==n.options.mode&&r.location?r.location.hash?r.location.hash.split(n.options.hashBang?"#!":"#")[1]:"":r._pathname||"":t===!1?("pushState"===n.options.mode?r.history.pushState({},null,n.options.root||"/"):r.location&&(r.location.hash=n.options.hashBang?"!":""),n):void 0},o.listen=function(){var t,e;return arguments[0]&&arguments[1]?(t=arguments[0],e=arguments[1]):e=arguments[0],function(){for(var t in e)this.add.call(this,t,e[t]);return this}.call(new o(t||{}))},i.global=[],i.prototype.preventDefault=function(){this.runCallback=!1},i.prototype.stopPropagation=function(){this.propagateEvent=!1},i.prototype.parent=function(){var t=!(!this.previousState||!this.previousState.value||this.previousState.value!=this.value);return!!t&&this.previousState},i.prototype.callback=function(){this.callbackRan=!0,this.timeStamp=Date.now(),this.next()},i.prototype.enqueue=function(t,e){for(var n=Array.isArray(t)?e<t.length?t.reverse():t:[t];n.length;)this.stack.splice(e||this.stack.length+1,0,n.shift());return this},i.prototype.next=function(){var t=this;return this.stack.shift().call(this.router,this.req,this,function(){t.next.call(t)})},a.prototype.parse=function(t){var e=t.match(this.regex),n=this,r={params:{},keys:this.keys,matches:(e||[]).slice(1),match:e};return o._forEach(r.matches,function(t,e){var o=n.keys[e]&&n.keys[e].name?n.keys[e].name:e;r.params[o]=t?decodeURIComponent(t):void 0}),r},o.CallStack=i,o.Request=a,"function"!=typeof r.define||r.define.amd.grapnel?"object"==typeof t&&"object"==typeof t.exports?t.exports=e=o:r.Grapnel=o:r.define(function(t,e,n){return r.define.amd.grapnel=!0,o})}.call({},"object"==typeof window?window:this)}).call(e,n(3))},function(t,e){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function o(t){if(p===setTimeout)return setTimeout(t,0);if((p===n||!p)&&setTimeout)return p=setTimeout,setTimeout(t,0);try{return p(t,0)}catch(e){try{return p.call(null,t,0)}catch(e){return p.call(this,t,0)}}}function i(t){if(l===clearTimeout)return clearTimeout(t);if((l===r||!l)&&clearTimeout)return l=clearTimeout,clearTimeout(t);try{return l(t)}catch(e){try{return l.call(null,t)}catch(e){return l.call(this,t)}}}function a(){v&&f&&(v=!1,f.length?d=f.concat(d):y=-1,d.length&&s())}function s(){if(!v){var t=o(a);v=!0;for(var e=d.length;e;){for(f=d,d=[];++y<e;)f&&f[y].run();y=-1,e=d.length}f=null,v=!1,i(t)}}function u(t,e){this.fun=t,this.array=e}function c(){}var p,l,h=t.exports={};!function(){try{p="function"==typeof setTimeout?setTimeout:n}catch(t){p=n}try{l="function"==typeof clearTimeout?clearTimeout:r}catch(t){l=r}}();var f,d=[],v=!1,y=-1;h.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];d.push(new u(t,e)),1!==d.length||v||o(s)},u.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=c,h.addListener=c,h.once=c,h.off=c,h.removeListener=c,h.removeAllListeners=c,h.emit=c,h.prependListener=c,h.prependOnceListener=c,h.listeners=function(t){return[]},h.binding=function(t){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(t){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}}])});