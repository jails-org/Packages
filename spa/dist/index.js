!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("jails")):"function"==typeof define&&define.amd?define("spa",["jails"],e):"object"==typeof exports?exports.spa=e(require("jails")):t.spa=e(t.jails)}(this,function(t){return function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return t[r].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(1),i=r(o),a=void 0,u={},s=document.head;e.default=function(t,e){a=document.querySelector("[data-outlet]"),e.transition=e.transition||h,c(t,e)};var c=function(t,e){u[t]?e.transition(d("change",t)):(e.transition(d("loading",t)),j(e.templateUrl).then(f(t)).then(l(t,e)))},d=function(t,e,n){var r={content:u[e],page:e,pages:u,state:t,outlet:a};return Object.assign(r,{append:function(){h(r),n&&n()}})},f=function(t){return function(e){var n=document.createElement("div");return n.innerHTML=e,u[t]=n.firstChild,e}},l=function(t,e){return function(n){s.appendChild(v("link",{rel:"stylesheet",href:e.css})),m(e.js,p(t,e))}},p=function(t,e){return function(){e.transition(d("loaded",t,function(){return i.default.start(a)}))}},h=function(t){switch(t.state){case"loading":a.classList.add("loading");break;case"loaded":case"change":a.classList.remove("loading"),a.innerHTML="",a.appendChild(t.content)}},v=function(t,e){var n=document.createElement(t);return Object.keys(e).forEach(function(t){return n.setAttribute(t,e[t])}),n},m=function(t,e){var n=v("script",{src:t});n.onload=e,document.head.appendChild(n)},j=function(t){var e=4,n=200,r=new XMLHttpRequest,o={},i=[],a=[];return r.open("GET",t),r.send(null),o.then=function(t){return i.push(t),o},o.fail=function(t){return a.push(t),o},r.onreadystatechange=function(){if(r.readyState===e){if(r.status===n){var t=r.responseText;i.forEach(function(e){return t=e(t)})}}else a.forEach(function(t){return t(r.status)})},o}},function(e,n){e.exports=t}])});